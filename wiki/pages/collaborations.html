{% extends "layout.html" %}
  
{% block title %}Collaborations & Support{% endblock %}
{% block lead %}Our comprehensive network of support, mentorship, and funding that was essential in bringing this project to life.{% endblock %}

{% block page_content %}
<style>
    .page-container {
        max-width: 1600px; 
        margin: 40px auto; 
        padding: 0 20px;
    }

    .page-content {
        width: 100%; 
        padding: 20px; 
        background-color: transparent; 
        border-radius: 0; 
        box-shadow: none;
    }
    .page-title { 
        font-size: 2.5em; 
        text-align: center; 
        margin-bottom: 40px; 
        color: #CC0000; /* Red H1 style */
        font-weight: 900;
        padding-bottom: 15px;
        border-bottom: 3px solid #f0f0f0;
        
        max-width: 1100px;
        margin-left: auto;
        margin-right: auto;
    } 
    .section-title { 
        font-size: 2em; 
        color: #000000; 
        padding-bottom: 5px; 
        margin-top: 50px; 
        margin-bottom: 25px; 
        font-weight: 800;
        
        max-width: 900px; 
        margin-left: auto;
        margin-right: auto;
        text-align: center; 
    }
    
    .subsection-title {
        font-size: 1.5em;
        color: #CC0000; 
        border-bottom: 2px solid #FDD8D8; 
        padding-bottom: 5px;
        margin-top: 35px;
        margin-bottom: 20px;
        font-weight: 700;
        
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        text-align: center; 
    }
    
    .section-text { 
        font-size: 1.1em; 
        line-height: 1.6; 
        margin-bottom: 15px; 
        color: #333; 

        max-width: 900px; 
        margin-left: auto;
        margin-right: auto;
        text-align: center; 
    }
    
    .card {
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        margin-bottom: 30px;
        background-color: #f7f7f7; 
        border-left: 5px solid #CC0000; 
        
        max-width: 800px; 
        margin-left: auto;
        margin-right: auto;
        text-align: center; 
    }


    .sponsors-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); 
        gap: 30px;
        margin-top: 25px;
        max-width: 650px; 
        margin-left: auto;
        margin-right: auto;
    }
    
    .advisors-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-top: 25px;
        max-width: 1400px; 
        margin-left: auto;
        margin-right: auto;
    }

    .sponsor-card, .advisor-card {
        background-color: white;
        border: 1px solid #e0e0e0;
        border-radius: 16px; 
        padding: 30px; 
        text-align: center;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); 
        transition: transform 0.3s, box-shadow 0.3s;
        position: relative; 
    }

    .sponsor-card:hover, .advisor-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(204, 0, 0, 0.15); 
        border-color: #CC0000;
    }
    
    .logo-placeholder {
        width: 180px; 
        height: 100px; 
        border-radius: 8px;
        background-color: #fcfcfc; 
        border: 2px solid #f0f0f0; 
        margin: 0 auto 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        padding: 8px; 
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
    }

    .logo-placeholder.text-fallback {
        width: 80px;
        height: 80px;
        border-radius: 50%; 
        background-color: #FDD8D8; 
        border: 3px solid #CC0000; 
    }
    
    .logo-placeholder.text-fallback .logo-text {
        font-weight: 800;
        font-size: 1.2em;
        color: #CC0000;
        text-transform: uppercase;
        line-height: 1;
        padding: 5px;
    }

    .logo-placeholder img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        display: block; 
    }
    
    .item-name {
        font-size: 1.3em; 
        font-weight: 700;
        color: #222;
        margin-bottom: 8px; 
        line-height: 1.3;
    }
    
    .item-type {
        font-size: 1em; 
        color: #CC0000;
        font-weight: 600;
        margin-bottom: 20px; 
        display: block;
    }

    .details-button {
        background-color: #CC0000;
        color: white;
        border: none;
        padding: 12px 25px; 
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
        transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
        width: 100%;
        margin-top: 10px; 
        box-shadow: 0 4px 6px rgba(204, 0, 0, 0.3);
    }
    
    .details-button:hover {
        background-color: #A30000;
        transform: translateY(-2px);
        box-shadow: 0 6px 8px rgba(204, 0, 0, 0.4);
    }
    
    .details-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7); 
        display: none; 
        justify-content: center;
        align-items: center;
        z-index: 1000;
        padding: 20px;
    }

    .modal-content {
        background-color: white;
        padding: 40px; 
        border-radius: 12px;
        max-width: 550px; 
        width: 100%;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        position: relative;
        animation: fadeIn 0.3s ease-out;
    }

    .modal-logo-container {
        text-align: center;
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 2px solid #eee; 
    }
    .modal-logo-container img {
        max-width: 200px; 
        max-height: 120px;
        object-fit: contain;
    }
    
    .modal-content h3 {
        color: #CC0000;
        font-size: 1.8em; 
        margin-top: 0;
        margin-bottom: 5px;
    }
    
    .modal-contribution {
        margin-top: 20px;
        padding: 20px;
        background-color: #fff8f8; 
        border-radius: 8px;
        border-left: 5px solid #CC0000;
        text-align: left; 
    }
    
    .close-button {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 1.8em;
        font-weight: bold;
        color: #333;
        cursor: pointer;
        background: none;
        border: none;
        line-height: 1;
        opacity: 0.7;
        transition: opacity 0.2s;
    }
    .close-button:hover {
        opacity: 1;
        color: #CC0000;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }


    .contractors-logo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 30px;
        margin-top: 25px;
        max-width: 1100px;
        margin-left: auto;
        margin-right: auto;
    }

    .contractor-logo-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        border: 1px solid #e0e0e0; 
        border-radius: 12px;
        background-color: white; 
        transition: box-shadow 0.3s, transform 0.3s;
        text-align: center;
        min-height: 180px; 
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .contractor-logo-card:hover {
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.1);
        border-color: #FDD8D8;
        transform: translateY(-3px);
    }

    .logo-area {
        width: 170px; 
        height: 90px; 
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
        background-color: #fcfcfc; 
        border: 1px solid #ddd; 
        border-radius: 8px;
        overflow: hidden;
        padding: 5px; 
    }
    
    .logo-area img {
        max-width: 90%; 
        max-height: 90%; 
        object-fit: contain;
    }

    .logo-text-placeholder {
        font-weight: 800;
        color: #CC0000;
        font-size: 0.9em;
    }

    .contractor-name {
        font-weight: 700;
        color: #333;
        font-size: 1.1em;
        margin-bottom: 5px;
    }

    .contractor-contribution {
        font-size: 0.9em;
        color: #666;
        line-height: 1.4;
    }


    .impact-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin-top: 25px;
        max-width: 1200px; 
        margin-left: auto;
        margin-right: auto;
    }

    .impact-card-v2 {
        background-color: #f7f7f7; 
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
        min-height: 130px; 
    }

    .impact-card-v2:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-color: #CC0000;
    }
    
    .impact-icon-svg {
        width: 35px;
        height: 35px;
        margin: 0 auto 10px;
    }

    .impact-icon-svg svg {
        stroke: #CC0000; 
        stroke-width: 2;
        fill: none;
        stroke-linecap: round;
        stroke-linejoin: round;
    }
    
    .impact-label {
        font-weight: 700;
        color: #333;
        font-size: 1.1em;
        line-height: 1.3;
    }
    

    .cta-banner {
        background-color: #CC0000; 
        padding: 40px;
        border-radius: 12px;
        color: white;
        text-align: center;
        margin-top: 40px;
        box-shadow: 0 8px 20px rgba(204, 0, 0, 0.3);
        max-width: 1000px; 
        margin-left: auto;
        margin-right: auto;
    }

    .cta-title {
        font-size: 2em;
        font-weight: 900;
        margin-bottom: 10px;
        line-height: 1.2;
    }

    .cta-text {
        font-size: 1.1em;
        margin-bottom: 25px;
        opacity: 0.9;
    }

    .cta-button-main {
        display: inline-block;
        background-color: white; 
        color: #CC0000; 
        padding: 12px 30px;
        border-radius: 8px;
        font-weight: 700;
        font-size: 1.1em;
        text-decoration: none;
        transition: background-color 0.2s, transform 0.2s;
        border: 2px solid white;
    }

    .cta-button-main:hover {
        background-color: #f0f0f0;
        transform: translateY(-2px);
    }
    

    @media (max-width: 900px) {
        .page-content {
             padding: 20px 20px; 
        }
    }
    

    @media (max-width: 700px) {
        .sponsors-grid {
            grid-template-columns: 1fr; 
            max-width: 100%; 
        }
    }
</style>


<div class="page-container">
    
    <div class="page-content">
        <div class="header">
            <!-- Main Heading -->
            <h1 class="page-title">Our Network of Support and Collaboration</h1>
        </div>

        <div class="content">
            <!-- Introductory Text  -->
            <p class="section-text">
                Our project has been made possible thanks to a diverse network of collaborators, advisors, sponsors, and contractors. Each contribution, whether funding, guidance, technical support, or resources, has helped us push the boundaries of our work.
            </p>

            <!-- Card for a key summary point -->
            <div class="card">
                <p class="section-text" style="margin: 0; max-width: none; text-align: center;">
                    To better visualize the ecosystem, we have grouped our external contributions into <b style="color: #CC0000;">Sponsors, External Advisors, and Contractors.</b>
                </p>
            </div>
        
            <!-- Sponsors & Grant Support -->
            <h2 id="sponsors" class="section-title">Sponsors & Grant Support</h2>
            <!-- Centered Text -->
            <p class="section-text">
                These institutions provided financial support to help our team carry out experiments, outreach, and community activities.
            </p>
            
            <div id="sponsors-container" class="sponsors-grid">
            </div>
            
            <!-- External Advisors -->
            <h2 id="advisors" class="section-title">External Advisors</h2>
            <!-- Centered Text -->
            <p class="section-text">
                Our advisors offered expertise in experimental design, bioinformatics, bioethics, educational activities, and software development. Their guidance was critical in shaping both our lab work and outreach activities.
            </p>
            
            <div id="advisors-container" class="advisors-grid">
            </div>


            <!-- Contractors & Technical Support -->
            <h2 id="technical-support" class="section-title">Contractors & Technical Support</h2>
            <!-- Centered Text -->
            <p class="section-text">
                These organizations provided materials and technical resources that enabled us to carry out experiments efficiently.
            </p>
            
            <div id="contractors-container" class="contractors-logo-grid">
            </div>

            <!-- Impact and Integration -->
            <h2 id="impact" class="section-title">Impact and Integration</h2>
            <!-- Centered Text -->
            <p class="section-text">
                The combined support from sponsors, advisors, and contractors created a dynamic ecosystem of resources and expertise. Funding enabled ambitious experiments, mentorship guided critical decisions, and technical contributions provided the tools we needed to succeed. Together, these elements amplified the project’s scientific quality, educational impact, and public outreach, transforming individual contributions into a cohesive, powerful force driving our work forward.
            </p>
            
            <div class="impact-grid">
                
                <div class="impact-card-v2">
                    <div class="impact-icon-svg">
                        <!-- SVG: Experimental Quality (Test Tube) -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM8 2v20M12 2v20M4 16h12"/>
                        </svg>
                    </div>
                    <span class="impact-label">Experimental Quality</span>
                </div>
                
                <div class="impact-card-v2">
                    <div class="impact-icon-svg">
                        <!-- SVG: Safety & Biosecurity (Shield with check) -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            <path d="M9 12l2 2 4-4"/>
                        </svg>
                    </div>
                    <span class="impact-label">Safety & Biosecurity</span>
                </div>
                
                <div class="impact-card-v2">
                    <div class="impact-icon-svg">
                        <!-- SVG: Software Usability (Gear) -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82-.33l-.06-.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0-.33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0 .33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1.51-1V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </div>
                    <span class="impact-label">Software Usability</span>
                </div>
                
                <div class="impact-card-v2">
                    <div class="impact-icon-svg">
                        <!-- SVG: Educational Outreach (Book) -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M2 12s4-8 10-8 10 8 10 8-4 8-10 8-10-8-10-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </div>
                    <span class="impact-label">Educational Outreach</span>
                </div>
                
                <div class="impact-card-v2">
                    <div class="impact-icon-svg">
                        <!-- SVG: Public Engagement (Megaphone) -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M17 10h-1a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1"/>
                            <path d="M12 18H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h7l5 4-5 4z"/>
                        </svg>
                    </div>
                    <span class="impact-label">Public Engagement</span>
                </div>
                
            </div>

            <!-- Invitation to Collaborate -->
            <h2 id="invite" class="section-title">Invitation to Collaborate</h2>
            <div class="cta-banner">
                <p class="cta-title">Join Our Mission in Synthetic Biology</p>
                <p class="cta-text">
                    We are always open to new partnerships! If you are a researcher, institution, sponsor, or company interested in supporting our work, we welcome your collaboration to help advance science and education.
                </p>
                <a href="#contact" class="cta-button-main">
                    Connect With Our Team
                </a>
            </div>
        </div>
    </div>
    
    <!-- Details Modal (Unified for both Sponsors and Advisors) -->
    <div id="details-modal" class="details-modal" onclick="closeModal(event)">
        <div class="modal-content">
            <button class="close-button" onclick="closeModal()">×</button>
            
            <!-- Logo container added to the modal -->
            <div id="modal-item-logo-container" class="modal-logo-container"></div>
            
            <h3 id="modal-item-name"></h3>
            <span id="modal-item-type" style="color: #666; display: block; margin-bottom: 10px;"></span>
            <p style="font-weight: 700; color: #CC0000; margin-bottom: 5px;">Contribution:</p>
            <div id="modal-contribution" class="modal-contribution section-text"></div>
        </div>
    </div>
</div>
<div class="back-to-top" id="back-to-top">
  ↑
</div>


<script>
    // Data structure for the sponsors (now includes logo URLs)
    const sponsorsData = [
        { 
            name: "Vice Chancellor of Internationalisation, University of Barcelona", 
            type: "Academic", 
            contribution: "Awarded a grant to support our team.",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/1-ub.webp"
        },
        { 
            name: "Faculty of Biology, University of Barcelona", 
            type: "Academic", 
            contribution: "Awarded a grant to support our team.",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/1-ub.webp"
        },
        { 
            name: "Promega Ibérica", 
            type: "Industry", 
            contribution: "Awarded a grant and promoted the project on social media to amplify its reach.",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/2-promega.webp"
        },
        { 
            name: "Ajuntament de Sant Martí de Centelles", 
            type: "Government", 
            contribution: "Awarded a grant to support our project.",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/3-ajunt.webp"
        }
    ];

    // Data structure for the advisors 
    const advisorsData = [
        { name: "Paul Copeland", type: "Academic", contribution: "Experimental conditions to test SCR" },
        { name: "Eric Rovira", type: "Industry", contribution: "Monitoring construct" },
        { name: "Andrew Anzalone", type: "Academic", contribution: "Work with HEK293T cells" },
        { name: "Roger Castells", type: "Academic", contribution: "Bioinformatics software" },
        { name: "Ogawa", type: "Academic", contribution: "Riboswitch mechanisms" },
        { name: "Dietmar Funck", type: "Academic", contribution: "Combining riboswitches, emphasizing empirical testing" },
        { name: "Jacob González Isa", type: "Academic", contribution: "Making software more user-friendly" },
        { name: "José Ignacio Pérez-López", type: "Academic", contribution: "Making software more user-friendly" },
        { name: "Miquel Rosell", type: "Other", contribution: "Making toolkit appealing to teachers" },
        { name: "Sant Nicolau’s School", type: "Other", contribution: "Pilot test for art activity" },
        { name: "Montagut School", type: "Other", contribution: "Pilot test for bioethics activity" },
        { 
            name: "Gemma Marfany", 
            type: "Academic", 
            contribution: "Advice on bioethics and art activity."
        },
        { name: "Cosmoxarxa", type: "Non-profit", contribution: "Presented project and aptamer-riboswitch model" },
        { name: "Ina Kruger & Kathryn Dungey", type: "Academic", contribution: "Technical advice for experimental activity" },
        { name: "International Biosecurity and Biosafety Initiative for Science (IBBIS)", type: "Non-profit", contribution: "Safety improvement advice for software" }
    ];
    
    // Data structure for the contractors
    const contractorsData = [
        { 
            name: "Thermo Fisher", 
            contribution: "Provided primers, miniprep kits, and lipofectamine",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/thermo-fisher-scientific-logo-svg.webp"
        },
        { 
            name: "Merck", 
            contribution: "Provided theophylline and selenium",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/fotonoticia-20250902184808-1920-jpg.webp"
        },
        { 
            name: "Promega", 
            contribution: "Provided Dual Luciferase Assay",
            logoUrl: "https://static.igem.wiki/teams/5622/images/collabo/4.webp"
        }
    ];


    document.addEventListener('DOMContentLoaded', () => {
        renderSponsors();
        renderAdvisors();
        renderContractors(); 
    });

    /**
     * Helper
     */
    function getInitialism(name) {
        const words = name.split(/[\s&]+/).filter(w => w.length > 0); 
        let initialism = '';
        if (words.length >= 2) {
            initialism = words.map(word => word[0]).join('').substring(0, 2);
        } else {
            initialism = name.substring(0, 2);
        }
        return initialism.toUpperCase();
    }

    /**
     * Creates and returns a single card element
     */
    function createCard(item, type, index) {
        const card = document.createElement('div');
        card.className = `${type}-card`; 

        // Logo Placeholder Container
        const logo = document.createElement('div');
        logo.className = `logo-placeholder`; 
        
        if (item.logoUrl) {
            // If URL is available (for Sponsors), use image
            const img = document.createElement('img');
            img.src = item.logoUrl;
            img.alt = `${item.name} Logo`;
            // Add a fallback for image loading errors
            img.onerror = function() {
                this.onerror=null; 
                this.src = 'https://placehold.co/180x100/f0f0f0/333?text=Logo+Error';
            };
            logo.appendChild(img);
        } else {
            // Fallback for Advisors (no logo URL), use the circular text style
            logo.classList.add('text-fallback');
            const logoText = document.createElement('span');
            logoText.className = 'logo-text';
            logoText.textContent = getInitialism(item.name);
            logo.appendChild(logoText);
        }
        
        card.appendChild(logo);

        // Name
        const name = document.createElement('p');
        name.className = 'item-name';
        name.textContent = item.name;
        card.appendChild(name);

        // Type
        const typeSpan = document.createElement('span');
        typeSpan.className = 'item-type';
        typeSpan.textContent = item.type;
        card.appendChild(typeSpan);

        // View Details Button
        const detailsButton = document.createElement('button');
        detailsButton.className = 'details-button';
        detailsButton.textContent = 'View Contribution';
        detailsButton.onclick = () => showDetailsModal(type, index);
        card.appendChild(detailsButton);

        return card;
    }

    /** Renders the Sponsors grid */
    function renderSponsors() {
        const container = document.getElementById('sponsors-container');
        sponsorsData.forEach((sponsor, index) => {
            container.appendChild(createCard(sponsor, 'sponsor', index));
        });
    }

    /** Renders the Advisors grid */
    function renderAdvisors() {
        const container = document.getElementById('advisors-container');
        advisorsData.forEach((advisor, index) => {
            container.appendChild(createCard(advisor, 'advisor', index));
        });
    }
    
    /** Renders the Contractors Logo Grid (New Visual) */
    function renderContractors() {
        const container = document.getElementById('contractors-container');
        contractorsData.forEach((contractor) => {
            const card = document.createElement('div');
            card.className = 'contractor-logo-card';

            // Logo Area
            const logoArea = document.createElement('div');
            logoArea.className = 'logo-area';
            
            if (contractor.logoUrl) {
                const img = document.createElement('img');
                img.src = contractor.logoUrl;
                img.alt = `${contractor.name} Logo`;
                // Fallback in case image fails to load
                img.onerror = function() {
                    this.onerror=null; 
                    this.src = 'https://placehold.co/170x90/f0f0f0/333?text=Logo+Error';
                };
                logoArea.appendChild(img);
            } else {
                const logoText = document.createElement('span');
                logoText.className = 'logo-text-placeholder';
                logoText.textContent = `[${contractor.name} Logo]`;
                logoArea.appendChild(logoText);
            }
            card.appendChild(logoArea);

            // Name
            const name = document.createElement('p');
            name.className = 'contractor-name';
            name.textContent = contractor.name;
            card.appendChild(name);

            // Contribution
            const contribution = document.createElement('p');
            contribution.className = 'contractor-contribution';
            contribution.textContent = contractor.contribution;
            card.appendChild(contribution);
            
            container.appendChild(card);
        });
    }

    function showDetailsModal(type, index) {
        let item;
        if (type === 'sponsor') {
            item = sponsorsData[index];
        } else if (type === 'advisor') {
            item = advisorsData[index];
        } else {
            console.error("Invalid type passed to showDetailsModal");
            return;
        }

        const modal = document.getElementById('details-modal');
        const logoContainer = document.getElementById('modal-item-logo-container');
        
        document.getElementById('modal-item-name').textContent = item.name;
        document.getElementById('modal-item-type').textContent = item.type;
        document.getElementById('modal-contribution').innerHTML = item.contribution;

        // --- Logo in Modal Logic ---
        logoContainer.innerHTML = ''; 

        if (item.logoUrl) {
            const img = document.createElement('img');
            img.src = item.logoUrl;
            img.alt = `${item.name} Logo`;
            // Fallback for modal image
            img.onerror = function() {
                this.onerror=null; 
                this.src = 'https://placehold.co/200x120/f0f0f0/333?text=Logo+Error';
            };
            logoContainer.appendChild(img);
        }
        modal.style.display = 'flex';
    }

    /** Closes the unified details modal */
    function closeModal(event) {
        if (!event || event.target.id === 'details-modal' || event.target.className === 'close-button') {
            document.getElementById('details-modal').style.display = 'none';
        }
    }
</script>

{% endblock %}
